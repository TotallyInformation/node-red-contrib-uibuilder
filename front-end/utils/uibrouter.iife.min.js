(()=>{var R=Object.defineProperty;var b=(i,e,t)=>e in i?R(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var n=(i,e,t)=>(b(i,typeof e!="symbol"?e+"":e,t),t),h=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var f=(i,e,t)=>(h(i,e,"read from private field"),t?t.call(i):e.get(i)),p=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},m=(i,e,t,o)=>(h(i,e,"write to private field"),o?o.call(i,t):e.set(i,t),t);var d,a=class{constructor(e){n(this,"config");n(this,"routeContainerEl");n(this,"currentRouteId");n(this,"previousRouteId");n(this,"routeIds",[]);p(this,d,!1);if(!fetch)throw new Error("[uibrouter:constructor] UibRouter requires `fetch`. Please use a current browser or load a fetch polyfill.");if(!e)throw new Error("[uibrouter:constructor] No config provided");if(!e.routes)throw new Error("[uibrouter:constructor] No routes provided in routerConfig");e.routeContainer||(e.routeContainer="#uibroutecontainer"),this.config=e,!this.config.defaultRoute&&this.config.routes[0]&&this.config.routes[0].id&&(this.config.defaultRoute=this.config.routes[0].id),this._setRouteContainer(),this._updateRouteIds(),Promise.all(Object.values(e.routes).filter(t=>t.type&&t.type==="url").map(this._loadExternal)).then(this._appendExternalTemplates).then(()=>(this._start(),!0)).catch(t=>{console.error(t)})}_setRouteContainer(){let e=document.getElementsByTagName("body")[0],t=this.routeContainerEl=document.querySelector(this.config.routeContainer);if(!t){let o=document.createElement("div");o.setAttribute("id",this.config.routeContainer.replace("#","")),e.append(o),t=this.routeContainerEl=document.querySelector(this.config.routeContainer)}}_appendExternalTemplates(e){let t=document.getElementsByTagName("head")[0];e.forEach(o=>{Array.isArray(o)?console.error(...o):t.append(o)})}_start(){f(this,d)!==!0&&(this.doRoute(this.keepHashFromUrl(window.location.hash)),window.addEventListener("hashchange",e=>this._hashChange(e)),document.dispatchEvent(new CustomEvent("uibrouter:loaded")),uibuilder&&uibuilder.set("uibrouter","loaded"),m(this,d,!0))}_hashChange(e){this.doRoute(e)}_createRouteContent(e){let t=document.querySelector(`#${e}`);if(!t)return console.error(`[uibrouter:createRouteContent] No route template found for route selector '#${e}'. Does the link url match a defined route id?`),!1;let o=t.content.cloneNode(!0);this.isRouteExternal(e)&&this._applyScripts(o);let r=document.createElement("div");r.dataset.route=e,r.append(o);try{this.routeContainerEl.append(r)}catch(u){return console.error(`[uibrouter:createRouteContent] Failed to apply route id '${e}'. 
 ${u.message}`),!1}return!0}_loadExternal(e){let t=e.id;return fetch(e.src).then(o=>o.ok===!1?[e.id,e.src,o.status,o.statusText]:o.text()).then(o=>{if(Array.isArray(o))return o;try{let u=document.querySelector(`#${t}`);u&&u.remove()}catch{}let r=document.createElement("template");return r.innerHTML=o,r.setAttribute("id",t),r}).catch(o=>{console.error(`[uibrouter:loadHTML] Error loading route template HTML from ${e.src}:`,o)})}_applyScripts(e){e.querySelectorAll("script").forEach(o=>{let r=document.createElement("script");r.textContent=o.innerText,e.append(r),o.remove()})}_updateRouteIds(){this.routeIds=new Set(Object.values(routerConfig.routes).map(e=>e.id))}doRoute(e){e||(e=this.config.defaultRoute);let t=this.routeContainerEl;if(!t)throw new Error("[uibrouter:doRoute] Cannot route, has router.setup() been called yet?");let o=this.keepHashFromUrl(window.location.hash);e||(e=o);let r,u;if(typeof e=="string"){if(r=this.keepHashFromUrl(e),u=o,r===""&&this.config.defaultRoute&&(r=this.config.defaultRoute),r!==o){window.location.hash=`#${r}`;return}}else if(e.type==="hashchange"){let s=e.newURL;if(s.includes("#"))u=this.keepHashFromUrl(e.oldURL),r=this.keepHashFromUrl(s);else return}else{u=o;try{r=this.keepHashFromUrl(e.target.attributes.href.value)}catch{throw new Error("[uibrouter:doRoute] No valid route found. Event.target does not have an href attribute")}}let l=!1;if(!r||!this.routeIds.has(r)){document.dispatchEvent(new CustomEvent("uibrouter:route-change-failed",{detail:{newRouteId:r,oldRouteId:u}})),uibuilder&&uibuilder.set("uibrouter","route change failed"),r===u&&(u=""),this.doRoute(u||""),console.error(`[uibrouter:doRoute] No valid route found. Either pass a valid route name or an event from an element having an href of '#${r}'. Route id requested: '${r}'`);return}if(this.config.hide){if(u){let c=document.querySelector(`div[data-route="${u}"]`);c&&(c.style.display="none")}let s=document.querySelector(`div[data-route="${r}"]`);s?(s.style.removeProperty("display"),l=!0):l=this._createRouteContent(r)}else t.replaceChildren(),l=this._createRouteContent(r);if(l===!1){document.dispatchEvent(new CustomEvent("uibrouter:route-change-failed",{detail:{newRouteId:r,oldRouteId:u}})),uibuilder&&uibuilder.set("uibrouter","route change failed"),window.location.hash=u?`#${u}`:"";return}this.currentRouteId=r,this.previousRouteId=u,t.dataset.currentRoute=r,this.setCurrentMenuItems(),document.dispatchEvent(new CustomEvent("uibrouter:route-changed",{detail:{newRouteId:r,oldRouteId:u}})),uibuilder&&(uibuilder.set("uibrouter","route changed"),uibuilder.set("uibrouter_CurrentRoute",r),uibuilder.set("uibrouter_CurrentTitle",this.routeTitle()),uibuilder.set("uibrouter_CurrentDescription",this.routeDescription()),uibuilder.set("uibrouter_CurrentDetails",this.getRouteConfigById(r)))}getRouteConfigById(e){return Object.values(this.config.routes).filter(t=>t.id===e)[0]}isRouteExternal(e){let t=this.getRouteConfigById(e);return!!(t&&t.type==="url")}defaultRoute(){this.config.defaultRoute&&this.doRoute(this.config.defaultRoute)}removeHash(){history.pushState("",document.title,window.location.pathname+window.location.search)}noRoute(){this.removeHash(),this.routeContainerEl.replaceChildren()}keepHashFromUrl(e){return e?e.replace(/^.*#(.*)/,"$1").replace(/\?.*$/,""):""}routeList(e){return e===!0?this.routeIds.map(t=>e===!0?`#${t.id}`:t.id):this.routeIds}addRoutes(e){Array.isArray(e)||(e=[e]),Promise.all(Object.values(e).filter(t=>t.type&&t.type==="url").map(this._loadExternal)).then(this._appendExternalTemplates).then(()=>{this.config.routes.push(...e),this._updateRouteIds(),document.dispatchEvent(new CustomEvent("uibrouter:routes-added",{detail:e})),uibuilder&&uibuilder.set("uibrouter","routes added")})}setCurrentMenuItems(){document.querySelectorAll("li[data-route]").forEach(t=>{t.dataset.route===this.currentRouteId?(t.classList.add("currentRoute"),t.setAttribute("aria-current","page")):(t.classList.remove("currentRoute"),t.removeAttribute("aria-current"))})}routeTitle(){let e=this.currentRoute()||{};return e.title||e.id||"[ROUTE NOT FOUND]"}routeDescription(){let e=this.currentRoute()||{};return e.description||e.id||"[ROUTE NOT FOUND]"}currentRoute(){return this.getRouteConfigById(this.currentRouteId)}};d=new WeakMap,n(a,"version","1.0.2");var y=a;window.UibRouter?console.warn("`UibRouter` already assigned to window. Have you tried to load it more than once?"):window.UibRouter=a;})();
//# sourceMappingURL=uibrouter.iife.min.js.map
